<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org"
      layout:decorate="~{layout/basic.html}">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SteamFit 홈</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <link href="/css/basic.css" rel="stylesheet">
    <link href="/css/main.css" rel="stylesheet">
</head>

<!-- 상단 배너 이미지 + 뒤로가기 버튼 -->
<!-- ✅ 상단 배너 이미지 + 뒤로가기 버튼 + 헤더 텍스트 -->
<div layout:fragment="community-list">
<div class="relative mt-[64px]">
    <!-- 배너 이미지 -->
    <img src="https://image.ff14.co.kr/ff14/media/desktopWallpapers/124wallpaper_2560X1440.jpg" alt="커뮤니티 배너"
         class="w-full h-48 object-cover"/>

    <!-- 뒤로가기 버튼 -->
    <button class="absolute top-3 left-3 bg-black bg-opacity-50 text-white p-2 rounded-full">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
             stroke="currentColor" class="w-5 h-5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5"/>
        </svg>
    </button>

    <!-- 텍스트 오버레이 -->
    <div class="absolute bottom-3 left-4 bg-black bg-opacity-50 text-white px-4 py-2 rounded-xl shadow-md">
        <div class="text-sm opacity-80">커뮤니티</div>
        <div class="text-xl font-bold"><i class="bi bi-controller"></i> 파이널 판타지 XIV</div>
    </div>
</div>


<!-- 헤더 영역 -->
<!-- <header class="bg-[#123458] text-white p-4 relative">
    <div class="flex justify-between items-center">
        <div class="text-lg font-semibold"><i class="bi bi-controller"></i> 파이널 판타지 XIV 커뮤니티</div>
    </div>
</header> -->

<!-- 필터 메뉴 -->
<!-- ✅ 커뮤니티 카테고리 메뉴 (슬라이드 + 전체보기 버튼) -->
<div class="flex items-center overflow-x-auto whitespace-nowrap bg-white p-2 border-b text-sm scroll-smooth">

    <!-- 카테고리 버튼들 -->
    <!-- 전체 보기 토글 버튼 -->
    <button onclick="toggleCategoryModal()" class="text-[#123458] font-semibold px-3 py-1 mr-2">≡</button>
    <button class="px-3 py-1 mr-2 text-gray-700 font-medium whitespace-nowrap">전체</button>
    <button class="px-3 py-1 mr-2 text-gray-700 font-medium whitespace-nowrap">공지</button>
    <button class="px-3 py-1 mr-2 text-gray-700 font-medium whitespace-nowrap">자유</button>
    <button class="px-3 py-1 mr-2 text-gray-700 font-medium whitespace-nowrap">정보</button>
    <button class="px-3 py-1 mr-2 text-gray-700 font-medium whitespace-nowrap">공략</button>
    <button class="px-3 py-1 mr-2 text-gray-700 font-medium whitespace-nowrap">질문</button>
    <button class="px-3 py-1 mr-2 text-gray-700 font-medium whitespace-nowrap">팬아트</button>
    <button class="px-3 py-1 mr-2 text-gray-700 font-medium whitespace-nowrap">건의</button>
</div>

<!-- ✅ 전체 카테고리 보기 모달 (팝업식) -->
<div id="categoryModal" class="hidden fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center">
    <div class="bg-white w-11/12 max-w-md rounded-xl p-4">
        <div class="flex justify-between items-center mb-3">
            <h2 class="text-sm font-semibold">전체 카테고리</h2>
            <button onclick="toggleCategoryModal()" class="text-gray-500 hover:text-gray-700">
                <i class="bi bi-x-lg"></i>
            </button>
        </div>
        <div class="grid grid-cols-3 gap-3 text-sm">
            <button class="py-2 px-3 bg-gray-100 rounded hover:bg-gray-200">전체</button>
            <button class="py-2 px-3 bg-gray-100 rounded hover:bg-gray-200">자유</button>
            <button class="py-2 px-3 bg-gray-100 rounded hover:bg-gray-200">정보</button>
            <button class="py-2 px-3 bg-gray-100 rounded hover:bg-gray-200">공략</button>
            <button class="py-2 px-3 bg-gray-100 rounded hover:bg-gray-200">질문</button>
            <button class="py-2 px-3 bg-gray-100 rounded hover:bg-gray-200">팬아트</button>
            <button class="py-2 px-3 bg-gray-100 rounded hover:bg-gray-200">건의</button>
            <button class="py-2 px-3 bg-gray-100 rounded hover:bg-gray-200">이벤트</button>
            <button class="py-2 px-3 bg-gray-100 rounded hover:bg-gray-200">운영</button>
        </div>
    </div>
</div>

<!-- 커뮤니티 공지 -->
<div class="bg-gray-100 p-3 text-sm text-gray-700 flex items-center justify-center gap-2 text-center
            whitespace-nowrap overflow-hidden">

    <span class="bg-red-500 text-white text-xs font-semibold px-2 py-1 rounded shrink-0">필독</span>

    <span class="truncate max-w-full">신규 유저 환영합니다! ✨ 커뮤니티 규칙을 꼭 읽어주세요.</span>

</div>


<!-- 게시글 목록 -->
<main class="p-4 space-y-4">
    <!-- 게시글 카드 -->
    <div class="flex items-start border-b pb-3">
        <div class="mr-3">
            <img src="https://i.namu.wiki/i/gg0dWa1-hlv7emBrudv3NCeuB8lkbEit0BkybiwGuBXVdDU7UBfcL-lRMNCnHcMsfsLtxB8EaGl_fsHCX6m3Xw.webp"
                 alt="" class="rounded w-12 h-12 object-cover"/>
        </div>
        <div class="flex-1">
            <p class="font-semibold">[질문] 흑마 도트 순서 요즘도 그대로인가요?</p>
            <p class="text-xs text-gray-500 mt-1">by mageplayer · 3분 전 · 조회 12 · 💬 2</p>
        </div>
    </div>

    <div class="flex items-start border-b pb-3">
        <div class="mr-3">
            <img src="https://cdn.gametoc.co.kr/news/photo/202310/76420_235999_4315.jpg" alt=""
                 class="rounded w-12 h-12 object-cover"/>
        </div>
        <div class="flex-1">
            <p class="font-semibold">[정보] 7.0 패치 주요 변경점 요약</p>
            <p class="text-xs text-gray-500 mt-1">by gamerinfo · 10분 전 · 조회 54 · 💬 5</p>
        </div>
    </div>

    <div class="flex items-start border-b pb-3">
        <div class="mr-3">
            <img src="https://cdn.khgames.co.kr/news/photo/202411/234341_268881_1612.jpeg" alt=""
                 class="rounded w-12 h-12 object-cover"/>
        </div>
        <div class="flex-1">
            <p class="font-semibold">[자유] 요즘 모험록 사는 사람 많네</p>
            <p class="text-xs text-gray-500 mt-1">by moogle_love · 1시간 전 · 조회 98 · 💬 7</p>
        </div>
    </div>
</main>
<!-- ✅ 하단 floating 영역 전체 컨테이너 -->
<div class="fixed bottom-20 right-4 z-40 pointer-events-none">
    <!-- 버튼 + 검색창 묶는 상대 컨테이너 -->
    <div class="relative flex flex-col items-end gap-2 pointer-events-auto">

        <!-- 🔍 검색창 (검색 버튼 왼쪽에 뜨도록 배치) -->
        <div id="searchBox"
             class="absolute right-16 bottom-2 transition-all duration-300 opacity-0 translate-y-4 invisible z-50">
            <div class="relative">
                <input type="text" placeholder="커뮤니티 검색..."
                       class="w-80 px-4 py-2 pl-10 pr-4 bg-white border rounded-full shadow focus:outline-none focus:ring-2 focus:ring-[#123458]"/>
                <i
                        class="bi bi-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-lg"></i>
            </div>
        </div>

        <!-- 글쓰기 버튼 위) -->
        <button
                class="bg-[#123458] text-white w-14 h-14 rounded-full shadow-lg flex items-center justify-center text-xl z-30">
            <i class="bi bi-pencil"></i>
        </button>

        <!-- 검색 토글 버튼 (아래) -->
        <button onclick="toggleSearch()"
                class="bg-gray-200 text-gray-800 w-14 h-14 rounded-full shadow-lg flex items-center justify-center text-xl z-30">
            <i class="bi bi-search"></i>
        </button>
    </div>
</div>

    <script th:src="@{/js/community/list.js}"></script>
</div>
</html>